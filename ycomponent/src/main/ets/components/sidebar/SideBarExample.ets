/**
 * SideBar/ToolBar Component Examples
 * OpenHarmony ä¾§è¾¹æ å’Œå·¥å…·æ ä½¿ç”¨ç¤ºä¾‹
 *
 * Components demonstrated:
 * - SideBarContainer: Container with collapsible sidebar
 * - ToolBar: Toolbar for grouping action items
 * - ToolBarItem: Individual toolbar items
 */

/**
 * SideBar ç¤ºä¾‹ç»„ä»¶
 * æ¼”ç¤ºå·¦ä¾§å¯¼èˆªä¾§è¾¹æ çš„åŸºæœ¬ç”¨æ³•
 */
@ComponentV2
export struct SideBarExample {
  @Local selectedIndex: number = 0
  private readonly menuItems: string[] = ['é¦–é¡µ', 'å‘ç°', 'æ¶ˆæ¯', 'æˆ‘çš„']

  build() {
    Column({ space: 16 }) {
      // æ ‡é¢˜
      Text('SideBar ä¾§è¾¹æ ç¤ºä¾‹')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .width('100%')
        .fontColor('#333333')

      // ä¾§è¾¹æ å®¹å™¨
      SideBarContainer() {
        // å·¦ä¾§è¾¹æ å†…å®¹
        Column() {
          ForEach(this.menuItems, (item: string, index: number) => {
            Text(item)
              .width('100%')
              .height(50)
              .fontSize(16)
              .fontColor(this.selectedIndex === index ? '#007DFF' : '#333333')
              .backgroundColor(this.selectedIndex === index ? '#E6F0FF' : Color.Transparent)
              .textAlign(TextAlign.Center)
              .borderRadius(8)
              .margin({ top: 4, bottom: 4 })
              .onClick(() => {
                this.selectedIndex = index
              })
          })
        }
        .width('80%')
        .height('100%')
        .backgroundColor('#F8F8F8')
        .padding(12)

        // å³ä¾§ä¸»å†…å®¹åŒºåŸŸ
        Column({ space: 12 }) {
          Text('ä¸»å†…å®¹åŒºåŸŸ')
            .fontSize(18)
            .fontWeight(FontWeight.Medium)

          Column({ space: 8 }) {
            Text(`å½“å‰é€‰ä¸­èœå•: ${this.menuItems[this.selectedIndex]}`)
              .fontSize(16)
              .fontColor('#007DFF')
              .fontWeight(FontWeight.Bold)

            Text('è¿™æ˜¯ä¾§è¾¹æ å®¹å™¨çš„ä¸»å†…å®¹åŒºåŸŸã€‚' +
              'ç‚¹å‡»å·¦ä¾§èœå•é¡¹å¯ä»¥åˆ‡æ¢ä¸åŒçš„å†…å®¹å±•ç¤ºã€‚')
              .fontSize(14)
              .fontColor('#666666')
              .lineHeight(22)
          }
          .padding(16)
          .backgroundColor('#FFFFFF')
          .borderRadius(8)
          .width('100%')
        }
        .width('100%')
        .height('100%')
        .padding(12)
      }
      .width('100%')
      .height(350)
      .backgroundColor('#FFFFFF')
      .borderRadius(12)
      .shadow({ radius: 8, color: '#1F000000', offsetX: 0, offsetY: 2 })
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FAFAFA')
    .borderRadius(12)
  }
}

/**
 * ToolBar ç¤ºä¾‹ç»„ä»¶
 * æ¼”ç¤ºåº•éƒ¨å·¥å…·æ çš„åŸºæœ¬ç”¨æ³•
 */
@ComponentV2
export struct ToolBarExample {
  @Local selectedTool: string = 'é€‰æ‹©å·¥å…·'
  @Local clickCount: number = 0

  build() {
    Column({ space: 16 }) {
      // æ ‡é¢˜
      Text('ToolBar å·¥å…·æ ç¤ºä¾‹')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .width('100%')
        .fontColor('#333333')

      // å·¥å…·æ å®¹å™¨
      Column({ space: 12 }) {
        // å†…å®¹æ˜¾ç¤ºåŒº
        Column({ space: 8 }) {
          Text('æ“ä½œç»“æœ:')
            .fontSize(14)
            .fontColor('#666666')

          Text(this.selectedTool)
            .fontSize(24)
            .fontColor('#007DFF')
            .fontWeight(FontWeight.Bold)

          if (this.clickCount > 0) {
            Text(`ç‚¹å‡»æ¬¡æ•°: ${this.clickCount}`)
              .fontSize(12)
              .fontColor('#999999')
          }
        }
        .width('100%')
        .padding(16)
        .backgroundColor('#F0F7FF')
        .borderRadius(8)
        .layoutWeight(1)

        // åº•éƒ¨å·¥å…·æ 
        Row({ space: 8 }) {
          ForEach(['ç¼–è¾‘', 'åˆ é™¤', 'åˆ†äº«', 'æ›´å¤š'], (tool: string) => {
            Column({ space: 4 }) {
              Text(this.getToolIcon(tool))
                .fontSize(20)
              Text(tool)
                .fontSize(12)
            }
            .width(60)
            .height(60)
            .backgroundColor(this.selectedTool.includes(tool) ? '#E6F0FF' : Color.Transparent)
            .borderRadius(8)
            .justifyContent(FlexAlign.Center)
            .onClick(() => {
              this.selectedTool = tool
              this.clickCount++
            })
          })
        }
        .width('100%')
        .height(70)
        .backgroundColor('#FFFFFF')
        .border({ width: { top: 1 }, color: '#E5E5E5' })
        .justifyContent(FlexAlign.SpaceEvenly)
        .padding({ left: 8, right: 8 })
      }
      .width('100%')
      .height(250)
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FAFAFA')
    .borderRadius(12)
  }

  private getToolIcon(tool: string): string {
    const icons: Record<string, string> = {
      'ç¼–è¾‘': 'âœï¸',
      'åˆ é™¤': 'ğŸ—‘ï¸',
      'åˆ†äº«': 'ğŸ“¤',
      'æ›´å¤š': 'â‹¯'
    }
    return icons[tool] || 'â€¢'
  }
}

/**
 * å³ä¾§ä¾§è¾¹æ ç¤ºä¾‹
 */
@ComponentV2
export struct RightSideBarExample {
  @Local showInfo: boolean = true

  build() {
    Column({ space: 16 }) {
      Text('å³ä¾§è¾¹æ ç¤ºä¾‹')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .width('100%')
        .fontColor('#333333')

      SideBarContainer() {
        // ä¸»å†…å®¹åŒº
        Column({ space: 12 }) {
          Text('ä¸»å†…å®¹åŒºåŸŸ')
            .fontSize(18)
            .fontWeight(FontWeight.Medium)

          Text('è¿™æ˜¯ä¸€ä¸ªå³ä¾§è¾¹æ ç¤ºä¾‹ã€‚' +
            'ä¾§è¾¹æ ä½äºå³ä¾§ï¼Œå¯ä»¥ç”¨äºæ˜¾ç¤ºè¾…åŠ©ä¿¡æ¯æˆ–æ“ä½œé¢æ¿ã€‚')
            .fontSize(14)
            .fontColor('#666666')
            .lineHeight(22)

          Button('åˆ‡æ¢ä¿¡æ¯æ˜¾ç¤º')
            .onClick(() => {
              this.showInfo = !this.showInfo
            })
        }
        .width('100%')
        .height('100%')
        .padding(16)
        .layoutWeight(1)

        // å³ä¾§è¾¹æ å†…å®¹
        Column({ space: 12 }) {
          Text('ä¿¡æ¯é¢æ¿')
            .fontSize(16)
            .fontWeight(FontWeight.Medium)

          if (this.showInfo) {
            Column({ space: 8 }) {
              InfoRow({ label: 'çŠ¶æ€', value: 'è¿è¡Œä¸­' })
              InfoRow({ label: 'ç‰ˆæœ¬', value: 'v1.0.0' })
              InfoRow({ label: 'ç”¨æˆ·', value: 'Admin' })
            }
          }
        }
        .width('80%')
        .height('100%')
        .padding(16)
        .backgroundColor('#F8F8F8')
      }
      .width('100%')
      .height(300)
      .backgroundColor('#FFFFFF')
      .borderRadius(12)
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FAFAFA')
    .borderRadius(12)
  }
}

/**
 * ä¿¡æ¯è¡Œè¾…åŠ©ç»„ä»¶
 */
@ComponentV2
struct InfoRow {
  @Param label: string = ''
  @Param value: string = ''

  build() {
    Row() {
      Text(this.label)
        .fontSize(14)
        .fontColor('#666666')
        .width(60)

      Text(this.value)
        .fontSize(14)
        .fontColor('#333333')
        .fontWeight(FontWeight.Medium)
        .layoutWeight(1)
    }
    .width('100%')
    .padding({ top: 4, bottom: 4 })
  }
}

/**
 * è‡ªå®šä¹‰å·¥å…·æ ç¤ºä¾‹
 */
@ComponentV2
export struct CustomToolBarExample {
  @Local activeIndex: number = 0
  @Local notificationCount: number = 3

  build() {
    Column({ space: 16 }) {
      Text('è‡ªå®šä¹‰å·¥å…·æ ç¤ºä¾‹')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .width('100%')
        .fontColor('#333333')

      Column({ space: 8 }) {
        Text(`å½“å‰é¡µé¢: ${['é¦–é¡µ', 'æ¶ˆæ¯', 'å‘ç°', 'æˆ‘çš„'][this.activeIndex]}`)
          .fontSize(18)
          .fontColor('#007DFF')
          .layoutWeight(1)

        // åº•éƒ¨å¯¼èˆªå·¥å…·æ 
        Row({ space: 8 }) {
          ForEach(['é¦–é¡µ', 'æ¶ˆæ¯', 'å‘ç°', 'æˆ‘çš„'], (title: string, index: number) => {
            Column({ space: 4 }) {
              Column({ space: 4 }) {
                Stack({ alignContent: Alignment.TopEnd }) {
                  Text(this.getPageIcon(index))
                    .fontSize(24)

                  // æ¶ˆæ¯å¾½æ ‡
                  if (index === 1 && this.notificationCount > 0) {
                    Text(this.notificationCount.toString())
                      .fontSize(10)
                      .fontColor('#FFFFFF')
                      .backgroundColor('#FF0000')
                      .borderRadius(10)
                      .padding({ left: 4, right: 4, top: 1, bottom: 1 })
                      .margin({ top: -4, right: -6 })
                  }
                }

                Text(title)
                  .fontSize(11)
                  .fontColor(this.activeIndex === index ? '#007DFF' : '#666666')
                  .fontWeight(this.activeIndex === index ? FontWeight.Bold : FontWeight.Normal)
              }
            }
            .width(80)
            .height(60)
            .justifyContent(FlexAlign.Center)
            .onClick(() => {
              this.activeIndex = index
              if (index === 1) {
                this.notificationCount = 0
              }
            })
          })
        }
        .width('100%')
        .height(60)
        .justifyContent(FlexAlign.SpaceEvenly)
        .backgroundColor('#FFFFFF')
        .border({ width: { top: 1 }, color: '#E5E5E5' })
        .padding({ left: 8, right: 8 })
      }
      .width('100%')
      .height(250)
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FAFAFA')
    .borderRadius(12)
  }

  private getPageIcon(index: number): string {
    const icons = ['ğŸ ', 'ğŸ’¬', 'ğŸ”', 'ğŸ‘¤']
    return icons[index] || 'â€¢'
  }
}

/**
 * SideBar/ToolBar ç»¼åˆç¤ºä¾‹é¡µé¢
 */
@Entry
@ComponentV2
export struct SideBarExamplePage {
  build() {
    NavDestination() {
      Scroll() {
        Column({ space: 20 }) {
          // é¡µé¢æ ‡é¢˜
          Text('SideBar & ToolBar ç»„ä»¶ç¤ºä¾‹')
            .fontSize(28)
            .fontWeight(FontWeight.Bold)
            .width('100%')
            .fontColor('#333333')
            .padding({ left: 16, right: 16, top: 16, bottom: 8 })

          // åŸºç¡€ä¾§è¾¹æ ç¤ºä¾‹
          SideBarExample()

          // åŸºç¡€å·¥å…·æ ç¤ºä¾‹
          ToolBarExample()

          // å³ä¾§è¾¹æ ç¤ºä¾‹
          RightSideBarExample()

          // è‡ªå®šä¹‰å·¥å…·æ ç¤ºä¾‹
          CustomToolBarExample()

          // åº•éƒ¨è¯´æ˜
          Column({ space: 8 }) {
            Text('ç»„ä»¶è¯´æ˜')
              .fontSize(18)
              .fontWeight(FontWeight.Bold)
              .fontColor('#333333')

            Text('SideBarContainer: ä¾§è¾¹æ å®¹å™¨ç»„ä»¶ï¼Œæ”¯æŒå·¦ä¾§æˆ–å³ä¾§è¾¹æ ')
              .fontSize(14)
              .fontColor('#666666')
              .lineHeight(22)

            Text('ToolBar: å·¥å…·æ ç»„ä»¶ï¼Œç”¨äºå±•ç¤ºæ“ä½œæŒ‰é’®æˆ–å¯¼èˆªé¡¹')
              .fontSize(14)
              .fontColor('#666666')
              .lineHeight(22)

            Text('ToolBarItem: å·¥å…·æ å­é¡¹ç»„ä»¶ï¼Œå¯è‡ªå®šä¹‰å†…å®¹å’Œæ ·å¼')
              .fontSize(14)
              .fontColor('#666666')
              .lineHeight(22)
          }
          .width('100%')
          .padding(16)
          .backgroundColor('#F0F7FF')
          .borderRadius(12)
          .margin({ bottom: 16 })
        }
        .width('100%')
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F5F5F5')
      .scrollBar(BarState.Auto)
    }
    .title('SideBar ä¾§è¾¹æ ')
    .mode(NavDestinationMode.STANDARD)
  }
}

@Builder
export function SideBarExamplePageBuilder() {
  SideBarExamplePage()
}
