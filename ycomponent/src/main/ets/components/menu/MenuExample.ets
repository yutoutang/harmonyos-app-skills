/**
 * Menu/ContextMenu Component Examples
 * OpenHarmony èœå•ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹
 *
 * å±•ç¤ºå„ç§èœå•ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼š
 * - bindMenu: ç‚¹å‡»è§¦å‘çš„èœå•
 * - bindContextMenu: å³é”®/é•¿æŒ‰è§¦å‘çš„ä¸Šä¸‹æ–‡èœå•
 * - MenuItem: èœå•é¡¹ç»„ä»¶
 * - MenuItemGroup: èœå•é¡¹åˆ†ç»„ç»„ä»¶
 */

/**
 * åŸºç¡€ Menu ç¤ºä¾‹ç»„ä»¶
 * å±•ç¤º bindMenu çš„åŸºæœ¬ç”¨æ³•
 */
@ComponentV2
export struct BasicMenuExample {
  @Local showMenu1: boolean = false
  @Local selectedItem: string = 'æœªé€‰æ‹©'

  build() {
    Column({ space: 12 }) {
      Text('åŸºç¡€ bindMenu ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Button('æ˜¾ç¤ºèœå•')
        .width('100%')
        .onClick(() => {
          this.selectedItem = 'æœªé€‰æ‹©'
          this.showMenu1 = true
        })
        .bindMenu(this.showMenu1, this.menuBuilder1())

      if (this.selectedItem !== 'æœªé€‰æ‹©') {
        Text(`å·²é€‰æ‹©: ${this.selectedItem}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  menuBuilder1() {
    Menu() {
      MenuItem({ content: 'æ–°å»ºæ–‡æ¡£' })
        .onClick(() => {
          this.selectedItem = 'æ–°å»ºæ–‡æ¡£'
        })
      MenuItem({ content: 'æ‰“å¼€æ–‡ä»¶' })
        .onClick(() => {
          this.selectedItem = 'æ‰“å¼€æ–‡ä»¶'
        })
      MenuItem({ content: 'ä¿å­˜æ–‡ä»¶' })
        .onClick(() => {
          this.selectedItem = 'ä¿å­˜æ–‡ä»¶'
        })
    }
  }
}

/**
 * å¸¦å›¾æ ‡çš„ Menu ç¤ºä¾‹ç»„ä»¶
 * å±•ç¤ºå¸¦å›¾æ ‡å’Œå¿«æ·é”®çš„èœå•
 */
@ComponentV2
export struct IconMenuExample {
  @Local showMenu2: boolean = false
  @Local selectedAction: string = ''

  build() {
    Column({ space: 12 }) {
      Text('å¸¦å›¾æ ‡çš„ Menu ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Button('æ˜¾ç¤ºå›¾æ ‡èœå•')
        .width('100%')
        .onClick(() => {
          this.selectedAction = ''
          this.showMenu2 = true
        })
        .bindMenu(this.showMenu2, this.iconMenuBuilder())

      if (this.selectedAction !== '') {
        Text(`å·²é€‰æ‹©: ${this.selectedAction}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  iconMenuBuilder() {
    Menu() {
      MenuItemGroup({ header: 'æ–‡ä»¶æ“ä½œ' }) {
        MenuItem({
          content: 'æ–°å»º',
          labelInfo: 'Ctrl+N'
        })
          .onClick(() => {
            this.selectedAction = 'æ–°å»º'
          })
        MenuItem({
          content: 'æ‰“å¼€',
          labelInfo: 'Ctrl+O'
        })
          .onClick(() => {
            this.selectedAction = 'æ‰“å¼€'
          })
        MenuItem({
          content: 'ä¿å­˜',
          labelInfo: 'Ctrl+S'
        })
          .onClick(() => {
            this.selectedAction = 'ä¿å­˜'
          })
      }

      MenuItemGroup({ header: 'ç¼–è¾‘æ“ä½œ' }) {
        MenuItem({
          content: 'æ’¤é”€',
          labelInfo: 'Ctrl+Z'
        })
          .onClick(() => {
            this.selectedAction = 'æ’¤é”€'
          })
        MenuItem({
          content: 'é‡åš',
          labelInfo: 'Ctrl+Y'
        })
          .onClick(() => {
            this.selectedAction = 'é‡åš'
          })
        MenuItem({
          content: 'å‰ªåˆ‡',
          labelInfo: 'Ctrl+X'
        })
          .onClick(() => {
            this.selectedAction = 'å‰ªåˆ‡'
          })
        MenuItem({
          content: 'å¤åˆ¶',
          labelInfo: 'Ctrl+C'
        })
          .onClick(() => {
            this.selectedAction = 'å¤åˆ¶'
          })
        MenuItem({
          content: 'ç²˜è´´',
          labelInfo: 'Ctrl+V'
        })
          .onClick(() => {
            this.selectedAction = 'ç²˜è´´'
          })
      }
    }
  }
}

/**
 * ContextMenu å³é”®èœå•ç¤ºä¾‹ç»„ä»¶
 * å±•ç¤º bindContextMenu çš„åŸºæœ¬ç”¨æ³•
 */
@ComponentV2
export struct ContextMenuExample {
  @Local showContextMenu1: boolean = false
  @Local selectedAction: string = ''

  build() {
    Column({ space: 12 }) {
      Text('ContextMenu å³é”®èœå•ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Text('å³é”®ç‚¹å‡»æ­¤åŒºåŸŸ(PC ç«¯)')
        .width('100%')
        .height(100)
        .backgroundColor('#E0E0E0')
        .borderRadius(8)
        .textAlign(TextAlign.Center)
        .fontSize(16)
        .bindContextMenu(this.showContextMenu1, this.contextMenuBuilder1())

      if (this.selectedAction !== '') {
        Text(`å·²é€‰æ‹©: ${this.selectedAction}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  contextMenuBuilder1() {
    Menu() {
      MenuItem({ content: 'å¤åˆ¶' })
        .onClick(() => {
          this.selectedAction = 'å¤åˆ¶'
        })
      MenuItem({ content: 'ç²˜è´´' })
        .onClick(() => {
          this.selectedAction = 'ç²˜è´´'
        })
      MenuItem({ content: 'åˆ é™¤' })
        .onClick(() => {
          this.selectedAction = 'åˆ é™¤'
        })
      MenuItem({ content: 'åˆ·æ–°' })
        .onClick(() => {
          this.selectedAction = 'åˆ·æ–°'
        })
    }
  }
}

/**
 * å¸¦åˆ†ç»„çš„ Menu ç¤ºä¾‹ç»„ä»¶
 * å±•ç¤º MenuItemGroup çš„ç”¨æ³•
 */
@ComponentV2
export struct GroupedMenuExample {
  @Local showMenu3: boolean = false
  @Local selectedTheme: string = 'æµ…è‰²'
  @Local fontSize: number = 16

  build() {
    Column({ space: 12 }) {
      Text('å¸¦åˆ†ç»„çš„ Menu ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Row({ space: 12 }) {
        Text(`ä¸»é¢˜: ${this.selectedTheme}`)
          .fontSize(14)
        Text(`å­—ä½“: ${this.fontSize}sp`)
          .fontSize(14)
      }
      .width('100%')

      Button('è®¾ç½®é€‰é¡¹')
        .width('100%')
        .onClick(() => {
          this.showMenu3 = true
        })
        .bindMenu(this.showMenu3, this.groupedMenuBuilder())
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  groupedMenuBuilder() {
    Menu() {
      MenuItemGroup({ header: 'ä¸»é¢˜è®¾ç½®' }) {
        MenuItem({
          content: 'æµ…è‰²'
        })
          .onClick(() => {
            this.selectedTheme = 'æµ…è‰²'
          })
        MenuItem({
          content: 'æ·±è‰²'
        })
          .onClick(() => {
            this.selectedTheme = 'æ·±è‰²'
          })
        MenuItem({
          content: 'è·Ÿéšç³»ç»Ÿ'
        })
          .onClick(() => {
            this.selectedTheme = 'è·Ÿéšç³»ç»Ÿ'
          })
      }

      MenuItemGroup({ header: 'å­—ä½“å¤§å°' }) {
        MenuItem({
          content: 'å° (14sp)'
        })
          .onClick(() => {
            this.fontSize = 14
          })
        MenuItem({
          content: 'ä¸­ (16sp)'
        })
          .onClick(() => {
            this.fontSize = 16
          })
        MenuItem({
          content: 'å¤§ (18sp)'
        })
          .onClick(() => {
            this.fontSize = 18
          })
      }
    }
  }
}

/**
 * åˆ—è¡¨é¡¹ä¸Šä¸‹æ–‡èœå•ç¤ºä¾‹
 * å±•ç¤ºåœ¨åˆ—è¡¨ä¸­ä½¿ç”¨ ContextMenu
 */
class FileItem {
  name: string = ''
  size: string = ''

  constructor(name: string, size: string) {
    this.name = name
    this.size = size
  }
}

@ComponentV2
export struct ListItemContextMenuExample {
  @Local showContextMenu3: boolean = false
  @Local items: Array<FileItem> = [
    new FileItem('document.txt', '2.5 MB'),
    new FileItem('image.jpg', '1.8 MB'),
    new FileItem('report.pdf', '3.2 MB'),
    new FileItem('data.xlsx', '500 KB')
  ]
  @Local selectedAction: string = ''
  @Local selectedItem: string = ''

  build() {
    Column({ space: 12 }) {
      Text('åˆ—è¡¨é¡¹ä¸Šä¸‹æ–‡èœå•ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      List({ space: 8 }) {
        ForEach(this.items, (item: FileItem, index: number) => {
          ListItem() {
            Row({ space: 12 }) {
              Text('ğŸ“')
                .fontSize(24)

              Column({ space: 4 }) {
                Text(item.name)
                  .fontSize(16)
                  .fontWeight(FontWeight.Medium)
                Text(item.size)
                  .fontSize(14)
                  .fontColor('#999999')
              }
              .alignItems(HorizontalAlign.Start)
              .layoutWeight(1)
            }
            .width('100%')
            .padding(12)
            .backgroundColor('#FFFFFF')
            .borderRadius(8)
          }
          .bindContextMenu(this.showContextMenu3, this.itemMenuBuilder(item))
        }, (item: FileItem, index: number) => `${index}_${item.name}`)
      }
      .width('100%')
      .height(200)
      .padding(8)

      if (this.selectedItem !== '') {
        Text(`${this.selectedAction}: ${this.selectedItem}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  itemMenuBuilder(item: FileItem) {
    Menu() {
      MenuItemGroup({ header: 'æ–‡ä»¶æ“ä½œ' }) {
        MenuItem({ content: 'æ‰“å¼€' })
          .onClick(() => {
            this.selectedAction = 'æ‰“å¼€'
            this.selectedItem = item.name
          })
        MenuItem({ content: 'é‡å‘½å' })
          .onClick(() => {
            this.selectedAction = 'é‡å‘½å'
            this.selectedItem = item.name
          })
        MenuItem({ content: 'å¤åˆ¶' })
          .onClick(() => {
            this.selectedAction = 'å¤åˆ¶'
            this.selectedItem = item.name
          })
        MenuItem({ content: 'åˆ é™¤' })
          .onClick(() => {
            this.selectedAction = 'åˆ é™¤'
            this.selectedItem = item.name
          })
      }
    }
  }
}

/**
 * æ–‡æœ¬ç¼–è¾‘å™¨ä¸Šä¸‹æ–‡èœå•ç¤ºä¾‹
 * å±•ç¤ºæ–‡æœ¬ç¼–è¾‘ç›¸å…³çš„èœå•æ“ä½œ
 */
@ComponentV2
export struct TextEditorContextMenuExample {
  @Local showContextMenu4: boolean = false
  @Local textContent: string = 'è¿™æ˜¯ä¸€æ®µç¤ºä¾‹æ–‡æœ¬,å¯ä»¥å³é”®æˆ–é•¿æŒ‰æ˜¾ç¤ºç¼–è¾‘èœå•'
  @Local selectedAction: string = ''
  @Local hasSelection: boolean = false

  build() {
    Column({ space: 12 }) {
      Text('æ–‡æœ¬ç¼–è¾‘å™¨ä¸Šä¸‹æ–‡èœå•ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Text(this.textContent)
        .width('100%')
        .height(120)
        .backgroundColor('#E0E0E0')
        .borderRadius(8)
        .padding(16)
        .maxLines(8)
        .textOverflow({ overflow: TextOverflow.Ellipsis })
        .bindContextMenu(this.showContextMenu4, this.editorMenuBuilder())

      if (this.selectedAction !== '') {
        Text(`æ“ä½œ: ${this.selectedAction}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  editorMenuBuilder() {
    Menu() {
      MenuItemGroup({ header: 'ç¼–è¾‘æ“ä½œ' }) {
        MenuItem({ content: 'æ’¤é”€', labelInfo: 'Ctrl+Z' })
          .onClick(() => {
            this.selectedAction = 'æ’¤é”€'
          })
        MenuItem({ content: 'é‡åš', labelInfo: 'Ctrl+Y' })
          .onClick(() => {
            this.selectedAction = 'é‡åš'
          })
      }

      MenuItemGroup({ header: 'å‰ªè´´æ¿' }) {
        MenuItem({ content: 'å‰ªåˆ‡', labelInfo: 'Ctrl+X' })
          .enabled(this.hasSelection)
          .onClick(() => {
            this.selectedAction = 'å‰ªåˆ‡'
          })
        MenuItem({ content: 'å¤åˆ¶', labelInfo: 'Ctrl+C' })
          .enabled(this.hasSelection)
          .onClick(() => {
            this.selectedAction = 'å¤åˆ¶'
            this.hasSelection = true
          })
        MenuItem({ content: 'ç²˜è´´', labelInfo: 'Ctrl+V' })
          .onClick(() => {
            this.selectedAction = 'ç²˜è´´'
          })
      }

      MenuItemGroup({ header: 'é€‰æ‹©' }) {
        MenuItem({ content: 'å…¨é€‰', labelInfo: 'Ctrl+A' })
          .onClick(() => {
            this.selectedAction = 'å…¨é€‰'
            this.hasSelection = true
          })
      }
    }
  }
}

/**
 * å¸¦å­èœå•çš„ Menu ç¤ºä¾‹
 * å±•ç¤ºå¤šçº§èœå•çš„ä½¿ç”¨
 */
@ComponentV2
export struct SubMenuExample {
  @Local showMenu4: boolean = false
  @Local selectedAction: string = ''

  build() {
    Column({ space: 12 }) {
      Text('å­èœå•ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Button('æ˜¾ç¤ºå­èœå•')
        .width('100%')
        .onClick(() => {
          this.selectedAction = ''
          this.showMenu4 = true
        })
        .bindMenu(this.showMenu4, this.subMenuBuilder())

      if (this.selectedAction !== '') {
        Text(`å·²é€‰æ‹©: ${this.selectedAction}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  subMenuBuilder() {
    Menu() {
      MenuItem({
        content: 'æ–°å»º',
        builder: this.newSubMenu()
      })
      MenuItem({ content: 'æ‰“å¼€' })
        .onClick(() => {
          this.selectedAction = 'æ‰“å¼€'
        })
      MenuItem({ content: 'ä¿å­˜' })
        .onClick(() => {
          this.selectedAction = 'ä¿å­˜'
        })
    }
  }

  @Builder
  newSubMenu() {
    Menu() {
      MenuItem({ content: 'æ–‡æœ¬æ–‡æ¡£' })
        .onClick(() => {
          this.selectedAction = 'æ–°å»º - æ–‡æœ¬æ–‡æ¡£'
        })
      MenuItem({ content: 'ç”µå­è¡¨æ ¼' })
        .onClick(() => {
          this.selectedAction = 'æ–°å»º - ç”µå­è¡¨æ ¼'
        })
      MenuItem({ content: 'æ¼”ç¤ºæ–‡ç¨¿' })
        .onClick(() => {
          this.selectedAction = 'æ–°å»º - æ¼”ç¤ºæ–‡ç¨¿'
        })
      MenuItem({ content: 'ç»˜å›¾' })
        .onClick(() => {
          this.selectedAction = 'æ–°å»º - ç»˜å›¾'
        })
    }
  }
}

/**
 * æ‰‹åŠ¨æ§åˆ¶èœå•ç¤ºä¾‹
 * å±•ç¤ºé€šè¿‡çŠ¶æ€å˜é‡æ§åˆ¶èœå•æ˜¾ç¤º
 */
@ComponentV2
export struct ManualControlMenuExample {
  @Local showMenu5: boolean = false
  @Local selectedAction: string = ''

  build() {
    Column({ space: 12 }) {
      Text('æ‰‹åŠ¨æ§åˆ¶èœå•ç¤ºä¾‹')
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .width('100%')

      Row({ space: 12 }) {
        Button('æ˜¾ç¤ºèœå•')
          .onClick(() => {
            this.showMenu5 = true
          })

        Button('éšè—èœå•')
          .onClick(() => {
            this.showMenu5 = false
          })
      }

      Text('å³é”®ç‚¹å‡»æˆ–ä½¿ç”¨æŒ‰é’®')
        .width('100%')
        .height(80)
        .backgroundColor('#E0E0E0')
        .borderRadius(8)
        .textAlign(TextAlign.Center)
        .fontSize(16)
        .bindContextMenu(this.showMenu5, this.manualMenuBuilder())

      if (this.selectedAction !== '') {
        Text(`å·²é€‰æ‹©: ${this.selectedAction}`)
          .fontSize(14)
          .fontColor('#007DFF')
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#F5F5F5')
    .borderRadius(12)
  }

  @Builder
  manualMenuBuilder() {
    Menu() {
      MenuItem({ content: 'é€‰é¡¹1' })
        .onClick(() => {
          this.selectedAction = 'é€‰é¡¹1'
        })
      MenuItem({ content: 'é€‰é¡¹2' })
        .onClick(() => {
          this.selectedAction = 'é€‰é¡¹2'
        })
      MenuItem({ content: 'é€‰é¡¹3' })
        .onClick(() => {
          this.selectedAction = 'é€‰é¡¹3'
        })
    }
  }
}

/**
 * Menu èœå•ç¤ºä¾‹ä¸»é¡µé¢
 * æ±‡æ€»æ‰€æœ‰èœå•ç¤ºä¾‹
 */
@Entry
@ComponentV2
export struct MenuExamplePage {
  build() {
    Scroll() {
      Column({ space: 20 }) {
        Text('Menu Component Examples')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .width('100%')
          .padding({ left: 16, right: 16, top: 16, bottom: 8 })

        BasicMenuExample()
        IconMenuExample()
        ContextMenuExample()
        GroupedMenuExample()
        ListItemContextMenuExample()
        TextEditorContextMenuExample()
        SubMenuExample()
        ManualControlMenuExample()
      }
      .width('100%')
      .padding({ left: 16, right: 16, bottom: 16 })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#FFFFFF')
    .scrollBar(BarState.Auto)
  }
}
